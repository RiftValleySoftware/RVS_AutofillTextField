<!DOCTYPE html>
<html lang="en">
  <head>
    <title>RVS_AutofillTextField  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="RVS_AutofillTextField  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          RVS_AutofillTextField Public API Doumentation
        </a>
         (100% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/RiftValleySoftware/RVS_AutofillTextField">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">RVS_AutofillTextField Reference</a>
      <img class="carat" src="img/carat.png" />
      RVS_AutofillTextField  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/RVS_AutofillTextField.html">RVS_AutofillTextField</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/RVS_AutofillTextFieldDataSourceType.html">RVS_AutofillTextFieldDataSourceType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/RVS_AutofillTextFieldDataSource.html">RVS_AutofillTextFieldDataSource</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/RVS_AutofillTextFieldDelegate.html">RVS_AutofillTextFieldDelegate</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <p><img src="img/icon.png" alt="Icon"></p>
<h1 id='rvs_autofilltextfield' class='heading'>RVS_AutofillTextField</h1>

<hr>

<p><strong>NOTE</strong></p>

<p><a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/">Here is a link to the GitHub repo for this project.</a></p>

<p><a href="https://riftvalleysoftware.github.io/RVS_AutofillTextField/">Here is a link to the technical documentation for this project.</a></p>

<hr>
<h2 id='introduction' class='heading'>INTRODUCTION</h2>

<p>This is a standard <a href="https://developer.apple.com/documentation/uikit/uitextfield"><code>UITextField</code></a>, extended to provide an &ldquo;autofill&rdquo; dropdown menu, under the widget. This widget will provide matches, within an Array of Strings, which can be used as &ldquo;autofill.&rdquo; If one of the strings is selected by the user, then it is entered, in its entirety, into the text field.</p>

<p><img src="img/Figure-01.png" alt="Example Display"></p>

<p><em>Figure 1: The Widget&rsquo;s Standard Display, with a &ldquo;Begins With&rdquo; Action</em></p>

<p>This is, by default, a simple, &ldquo;one-way,&rdquo; &ldquo;greedy&rdquo; match. It starts from the beginning, then moves forward, matching the characters entered into the text field. They must all match, but the match can be case/diacritical-independent (by default).</p>

<p>We can choose several modes of matching, so we can &ldquo;wildcard&rdquo; text before and/or after the string (or insist on an exact match).</p>

<p><img src="img/Figure-02.png" alt="Example Display With Wildcard Before and After"></p>

<p><em>Figure 2: The Widget&rsquo;s Standard Display, with a &ldquo;Contains&rdquo; Action</em></p>

<p>The widget has been designed to allow a lot of customization, as well as a very simple way to provide the data to be searched. It also has the ability to be modified for more advanced data searching.</p>

<p>The user must actually select a table row. There is no &ldquo;tab&rdquo; autofill. This is for things like phones, where that doesn&rsquo;t really make sense, and the application may have other plans for the return function.</p>
<h2 id='what-problem-does-this-solve' class='heading'>WHAT PROBLEM DOES THIS SOLVE?</h2>

<p>Entering text on phones isn&rsquo;t easy. This helps to reduce the amount of text we actually need to enter.</p>

<p>Additionally, this can help us to &ldquo;explore&rdquo; datasets, by entering partial specifications. For example, if we are searching for users in a certain area, we might do a &ldquo;triage&rdquo; search, and create a subset of the main database of users, for the locality. These can be used as autofill suggestions, when looking for a user.</p>
<h2 id='requirements' class='heading'>REQUIREMENTS</h2>

<p>This is a <a href="https://apple.com/swift">Swift</a>-only module. It is based on <a href="https://developer.apple.com/documentation/uikit">standard UIKit</a>, for <a href="https://apple.com/ios">iOS</a>/<a href="https://apple.com/ipados">iPadOS</a>.</p>

<p>There are no dependencies to use the widget, but there are a couple, if you will run <a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/tree/master/Tests/RVS_AutofillTextField/RVS_AutofillTextField_Test_Harness">the test harness</a>:</p>

<ol>
<li><a href="https://github.com/RiftValleySoftware/RVS_Checkbox"><code>RVS_Checkbox</code></a></li>
<li><a href="https://github.com/RiftValleySoftware/RVS_GeneralObserver"><code>RVS_GeneralObserver</code></a></li>
</ol>
<h2 id='implementation' class='heading'>IMPLEMENTATION</h2>
<h3 id='where-to-get-the-package' class='heading'>Where to Get the Package</h3>

<p>You can get this package as a <a href="https://swift.org/package-manager/">Swift Package Manager</a> (SPM) package, or you can include it, using <a href="https://github.com/Carthage/Carthage">GitHub&rsquo;s Carthage Package Manager</a>. Finally, you can also <a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField">directly access the GitHub repository</a>, and simply include <a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/blob/master/Sources/RVS_AutofillTextField/RVS_AutofillTextField.swift">the single source file</a> into your app.</p>
<h4 id='the-swift-package-manager' class='heading'>The Swift Package Manager</h4>

<p>In order to use the SPM, add the package to your project with its GitHub repo location:</p>
<pre class="highlight plaintext"><code>git@github.com:RiftValleySoftware/RVS_AutofillTextField.git (SSH),
</code></pre>

<p>or</p>
<pre class="highlight plaintext"><code>https://github.com/RiftValleySoftware/RVS_AutofillTextField.git (HTTPS).
</code></pre>

<p>Add the static <code><a href="Classes/RVS_AutofillTextField.html">RVS_AutofillTextField</a></code> library to your project, and add the following <code>import</code> line to the top of the files that will use the widget:</p>
<pre class="highlight plaintext"><code>import RVS_AutofillTextField
</code></pre>
<h4 id='carthage' class='heading'>Carthage</h4>

<p>Add the following line to your <a href="https://github.com/Carthage/Carthage/blob/master/Documentation/Artifacts.md#cartfile">Cartfile</a>:</p>
<pre class="highlight plaintext"><code>github "RiftValleySoftware/RVS_AutofillTextField.git"
</code></pre>

<p>Then, run <code>carthage update</code> in the main project directory.</p>

<p>This will create a directory, called &ldquo;Carthage&rdquo;. Inside of that, will be another directory, called <code>Checkins</code>. Inside of that, will be <code>RVS_AutofillTextField/Sources/RVS_AutofillTextField/RVS_AutofillTextField.swift</code>.</p>

<p>I recommend that you include this file directly into your app, as opposed to building the library, and adding that. If you do this, there will be no need to import a module. Additionally, the IBDesignables stuff should work (these are the previews in the storyboard file).</p>
<h4 id='directly-from-github' class='heading'>Directly From GitHub</h4>

<p>The above Carthage instructions will also basically apply to getting the file from GitHub. You can use the following GitHub URLs to access the repository:</p>
<pre class="highlight plaintext"><code>git@github.com:RiftValleySoftware/RVS_AutofillTextField.git (SSH),
</code></pre>

<p>or</p>
<pre class="highlight plaintext"><code>https://github.com/RiftValleySoftware/RVS_AutofillTextField.git (HTTPS).
</code></pre>

<p>You can add the repo as a <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">Git Submodule</a>, or even as a separate repo, that you use as a source for the physical file.</p>

<p>Get the same file, as indicated by Carthage, and add it to your project.</p>
<h3 id='customizing-the-widget' class='heading'>Customizing the widget</h3>

<p>You instantiate the control, in exactly the same way that you would, an instance of <a href="https://developer.apple.com/documentation/uikit/uitextfield"><code>UITextField</code></a>. This can be done programmatically:</p>
<pre class="highlight plaintext"><code>var myTextEntryWidget = RVS_AutofillTextField(frame: widgetFrame)
</code></pre>

<p>or using Interface Builder, and a storyboard/IB file:</p>

<p><img src="img/Figure-03.png" alt="Adding A Text Field"></p>

<p><em>Figure 3: Dragging In A Text Field Object</em></p>

<p>Start by dragging in a Text Field.</p>

<p><img src="img/Figure-04.png" alt="Setting The Type"></p>

<p><em>Figure 4: Setting the Class (and Possibly, the Module).</em></p>

<p>Convert the Class to an instance of <code><a href="Classes/RVS_AutofillTextField.html">RVS_AutofillTextField</a></code>. You may need to also set the module (if not directly including the file).</p>

<p><img src="img/Figure-05.png" alt="Accessing the Widdget"></p>

<p><em>Figure 5: The Widget, in Its New Home.</em></p>

<p>It will now show up as a standard Text Field.</p>

<p><img src="img/Figure-06.png" alt="The Widget Parameters"></p>

<p><em>Figure 6: The Custom Widget Parameters.</em></p>

<p>These are the custom parameters for the <code><a href="Classes/RVS_AutofillTextField.html">RVS_AutofillTextField</a></code> type.</p>

<p><img src="img/Figure-07.png" alt="The Standard Text Field Parameters"></p>

<p><em>Figure 7: The Standard Text Field Parameters.</em></p>

<p>But we also have the traditional Text Field controls.</p>

<hr>

<p><strong>NOTE</strong></p>

<p>The dropdown menu attaches to the main root screen view, so it &ldquo;floats&rdquo; above everything else. <strong>It is not modal.</strong> You can still access everything behind it.</p>

<p>Also, <strong>the dropdown only appears when the widget has focus, and contains text that matches the selections</strong>. Just giving it a list of strings is not enough to make the dropdown appear. It also has to have text in the field that  will trigger a match in one or more of the strings.</p>

<hr>
<h3 id='setting-up-the-data-source' class='heading'>Setting Up the Data Source</h3>

<p>The widget won&rsquo;t work, without a data source. You can&rsquo;t add the data source via the storyboard. It needs to be done programmatically. This is because we did not want to force the user of this widget to have to start with an <a href="https://developer.apple.com/documentation/objectivec/nsobject"><code>NSObject</code></a>-based class (required to have the data source available via IB).</p>

<p>Once the widget has been installed/instantiated, it needs to be referenced by <a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/blob/master/Tests/RVS_AutofillTextField/RVS_AutofillTextField_Test_Harness/Sources/RVS_AutofillTextField_Test_Harness_ViewController.swift#L176">an internal property</a>, like so:</p>
<pre class="highlight plaintext"><code>/* ################################################################## */
/**
 This is the CuT (Code Under Test). It is the test target instance of `RVS_AutofillTextField`.
 */
@IBOutlet weak var autofillTextField: RVS_AutofillTextField!
</code></pre>

<p><a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/blob/master/Tests/RVS_AutofillTextField/RVS_AutofillTextField_Test_Harness/Sources/RVS_AutofillTextField_Test_Harness_ViewController.swift#L223">During the load setup, we should add the data source</a>, like so:</p>
<pre class="highlight plaintext"><code>/* ################################################################## */
/**
 Called when the view hierarchy has been loaded. We use this to sync the CuT with the UX.
 */
override func viewDidLoad() {
    super.viewDidLoad()
    autofillTextField?.dataSource = self
</code></pre>

<p>The above examples were taken directly from <a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/tree/master/Tests/RVS_AutofillTextField/RVS_AutofillTextField_Test_Harness">the test harness project</a>. In that project, the main View Controller is also <a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/blob/master/Sources/RVS_AutofillTextField/RVS_AutofillTextField.swift#L197">the <code><a href="Protocols/RVS_AutofillTextFieldDataSource.html">RVS_AutofillTextFieldDataSource</a></code>-conformant Instance</a>.</p>
<h3 id='conforming-to-the-data-source-protocol' class='heading'>Conforming to the Data Source Protocol</h3>

<p><a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/blob/master/Sources/RVS_AutofillTextField/RVS_AutofillTextField.swift#L190">The <code><a href="Protocols/RVS_AutofillTextFieldDataSource.html">RVS_AutofillTextFieldDataSource</a></code> protocol</a> is really very simple.</p>

<p>It requires that an Array of <a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/blob/master/Sources/RVS_AutofillTextField/RVS_AutofillTextField.swift#L127">a simple struct</a> be supplied to the widget, which will then be used to provide the autofill &ldquo;fuel.&rdquo;</p>

<p>Each instance of the struct will have two properties:</p>
<h5 id='the-value-property' class='heading'>The value Property</h5>

<p>This is a simple <code>String</code>. It has the full string to be searched, and, possibly, offered to replace the contents of the text field.</p>
<h5 id='the-refcon-property' class='heading'>The refCon Property</h5>

<p>This allows you to attach an arbitrary &ldquo;reference context&rdquo; to the element. This is how you can attach things like references to other properties or objects. It is an optional <code>Any?</code> value, defaulted to <code>nil</code>, so there is no need to define it. It&rsquo;s just there, for you.</p>

<p>This Array can be provided in one of two ways:</p>
<h4 id='the-really-simple-way' class='heading'>The Really Simple Way</h4>

<p>By default, the data source protocol does a rather simple, naive search for matches. If we are happy with this, then all we need to do, is provide a property, <a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/blob/master/Tests/RVS_AutofillTextField/RVS_AutofillTextField_Test_Harness/Sources/RVS_AutofillTextField_Test_Harness_ViewController.swift#L242">like so</a>:</p>
<pre class="highlight plaintext"><code>/* ################################################################## */
/**
 This is an Array of structs, that are the searchable data collection for the text field.
 If this is empty, then no searches will return any results.
 */
var textDictionary: [RVS_AutofillTextFieldDataSourceType] {
    testingTextDictionary.compactMap {
        let currentStr = $0.trimmingCharacters(in: .whitespacesAndNewlines)
        return !currentStr.isEmpty ? RVS_AutofillTextFieldDataSourceType(value: currentStr) : nil
    }
}
</code></pre>

<p>The protocol default will take care of searching and matching for us.</p>
<h3 id='the-more-complex-way' class='heading'>The More Complex Way</h3>

<p>If you want to have a way to optimize or otherwise filter/interpret the data being given to the widget, your data source can implement <a href="https://github.com/RiftValleySoftware/RVS_AutofillTextField/blob/2cfceaf7c51a4063ca65860553b6ad213145060c/Sources/RVS_AutofillTextField/RVS_AutofillTextField.swift#L640">the <code>getTextDictionaryFromThis(string inString: String, isCaseSensitive inIsCaseSensitive: Bool, isWildcardBefore inIsWildcardBefore: Bool, isWildcardAfter inIsWildcardAfter: Bool, maximumAutofillCount inMaximumAutofillCount: Int) -&gt; [RVS_AutofillTextFieldDataSourceType]</code> method</a></p>

<p>This is called by the widget repeatedly, with a String, containing the current text contents, and returns a filtered and searched Array of elements.</p>

<p>You must implement at least one of the above methods. If you don&rsquo;t, then you just have a normal <code>UITextField</code> instance.</p>
<h3 id='the-widget-options' class='heading'>The Widget Options</h3>

<p>The widget has a few optional fields that are available via the storyboard (Figure 6).</p>
<h4 id='customizing-behaviors' class='heading'>Customizing Behaviors</h4>

<ol>
<li><p><code>isAutoFillOn</code>
This is a Bool value that is a &ldquo;main circuit breaker&rdquo; for the functionality. Default is on. If off, then the widget is just a regular <code>UITextField</code>.</p></li>
<li><p><code>isCaseSensitive</code>
If this is on (default is off), then searches take case and diacriticals into account. If off, then the search ignores diacriticals and case.</p></li>
<li><p><code>isWildcardBefore</code>
If this is on (default is off), then we ignore characters <strong>before</strong> the match, so the match can be further into the string. It does not need to start the string.</p></li>
<li><p><code>isWildcardAfter</code>
If this is on (default is on), then characters <strong>after</strong> the match are ignored.</p></li>
<li><p><code>maximumAutofillCount</code>
This is an integer value that designates the maximum number of results that show up in the table. If it is set to -1 (or any negative number), then there will be no limit, and the table could get quite large (and scroll). Default is 5.</p></li>
</ol>

<p>If you are looking for an exact match, then turn off both wildcards. If you make it case-sensitive, then the string must match exactly.</p>

<p>If you are looking for a case-insensitive match at the start, just leave the defaults. If you are looking for an &ldquo;ends with&rdquo; match, then turn on the before wildcards, and turn off the after wildcards.</p>
<h4 id='customizing-appearance' class='heading'>Customizing Appearance</h4>

<p>You can specify different background and font colors. Default is standard system background, at a 75% opacity, and standard label colors, with a 50% opacity for unmatched text.</p>
<h4 id='the-container-view' class='heading'>The Container View</h4>

<p>By default, the dropdown attaches to the main <a href="https://developer.apple.com/documentation/uikit/uiwindow/"><code>UIWindow</code></a> instance for the app, but you can provide your own context, by setting <a href="https://riftvalleysoftware.github.io/RVS_AutofillTextField/Classes/RVS_AutofillTextField.html#/s:21RVS_AutofillTextFieldAAC13containerViewSo6UIViewCSgvp">the <code>containerView</code> property</a>.
If you leave it nil, the main window is used. The coordinates of the display are adjusted to work in the context view.</p>
<h4 id='the-delegate' class='heading'>The Delegate</h4>

<p>There is a <a href="https://riftvalleysoftware.github.io/RVS_AutofillTextField/Protocols/RVS_AutofillTextFieldDelegate.html"><code><a href="Protocols/RVS_AutofillTextFieldDelegate.html">RVS_AutofillTextFieldDelegate</a></code></a> protocol. It has a simple method for detecting when the user selects a choice.</p>

<p>You assign the delegate by simply setting it to the <a href="https://riftvalleysoftware.github.io/RVS_AutofillTextField/Protocols/RVS_AutofillTextFieldDelegate.html"><code>UITextField.delegate</code></a> property. It needs to be a <a href="https://developer.apple.com/documentation/uikit/uitextfielddelegate/"><code>UITextFieldDelegate</code></a>
(which also means that the delegate must be an <a href="https://developer.apple.com/documentation/objectivec/nsobject"><code>NSObject</code></a>), even if it is not using any of the delegate functionality.
This is because we &ldquo;piggyback&rdquo; on the built-in delegate.
The delegate protocol, itself, does not extend <a href="https://developer.apple.com/documentation/uikit/uitextfielddelegate/"><code>UITextFieldDelegate</code></a>, because it has a data type that won&rsquo;t necessarily work with Objective-C.</p>
<h2 id='license' class='heading'>LICENSE</h2>

<p>MIT License</p>

<p>Copyright &copy; 2021 Rift Valley Software, Inc.</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &ldquo;Software&rdquo;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED &ldquo;AS IS&rdquo;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2022 <a class="link" href="https://riftvalleysoftware.com" target="_blank" rel="external">The Great Rift Valley Software Company</a>. All rights reserved. (Last updated: 2022-01-26)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.7</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
